<div *ngIf="simulation">
    <div class="center">
        <div class="report">
            <div class="header">
                <img src="/assets/logoLafis.png" alt="">
                <h1>Relatório da Simulação</h1>
                <!-- <p>Gerado Automaticamente</p> -->
                <button (click)="printReport()">Imprimir Relatório</button>
            </div>
            
            <div class="content">
                <div class="col">
                    <div class="section">
                        <h3>Informações Gerais</h3>
                    </div>
                    <app-info-item [label]="'ID'" [value]="simulation.id"></app-info-item>
                    <app-info-item [label]="'Emissões'" [value]="simulation.emissions | number"></app-info-item>
                    <app-info-item [label]="'Vazão'" [value]="(simulation.escaped | number) + ' (' + (escapedPercent | number:'1.1-1') + '%)'"></app-info-item>
                    <app-info-item [label]="'Status'" [value]="simulation.status"></app-info-item>
                    <app-info-item [label]="'Criada em'" [value]="simulation.created | date:'dd MMM yyyy - HH:mm'"></app-info-item>
                    <app-info-item [label]="'Tempo de simulação'" [value]="simulation.duration"></app-info-item>
                </div>

                <div class="col">
                    <div class="section">
                        <h3>Relação Emissões x Vazão</h3>
                    </div>
                    <div class="chart-container">
                        <canvas baseChart [data]="chartData" [options]="chartOptions" [type]="'pie'"></canvas>
                    </div>

                    <app-info-item [label]="'Ângulo sólido calculado'" [value]="(solidAngle | number:'1.5-5') + ' ± ' + (error | number)"></app-info-item>
                    <app-info-item [label]="'Erro calculado'" [value]="error | number"></app-info-item>
                </div>
            </div>

            <div class="content">
                <div class="col">
                    <div class="section">
                        <h3>Informações da Abertura</h3>
                    </div>
                    <app-info-item [label]="'Tipo de Abertura'" [value]="simulation.context.aperture.type"></app-info-item>
                    <app-info-item [label]="'Altura do poço'" [value]="simulation.context.aperture.height + 'cm'"></app-info-item>
                    
                    @if(simulation.context.aperture.type === 'rectangular'){
                        <app-info-item [label]="'Largura Abertura'" [value]="simulation.context.aperture.width + 'cm'"></app-info-item>
                        <app-info-item [label]="'Profundidade da Abertura'" [value]="simulation.context.aperture.depth + 'cm'"></app-info-item>
                    }

                    @if(simulation.context.aperture.type !== 'rectangular'){
                        <app-info-item [label]="'Raio da Abertura'" [value]="simulation.context.aperture.radius + 'cm'"></app-info-item>
                    }
                </div>
                <div class="col">
                    <div class="section">
                        <h3>Informações da Fonte</h3>
                    </div>
                    <app-info-item [label]="'Tipo de Fonte'" [value]="simulation.context.source.type"></app-info-item>
                    <app-info-item [label]="'Posição da fonte no eixo vertical (z)'" [value]="simulation.sourceHeight + 'cm'"></app-info-item>

                    @if(simulation.context.source.type === 'cuboid'){
                        <app-info-item [label]="'Altura da Fonte'" [value]="simulation.context.source.height + 'cm'"></app-info-item>
                        <app-info-item [label]="'Largura da Fonte'" [value]="simulation.context.source.width + 'cm'"></app-info-item>
                        <app-info-item [label]="'Profundidade da Fonte'" [value]="simulation.context.source.depth + 'cm'"></app-info-item>
                    }

                    @if(simulation.context.source.type === 'cylindrical'){
                        <app-info-item [label]="'Altura da Fonte'" [value]="simulation.context.source.height + 'cm'"></app-info-item>
                        <app-info-item [label]="'Raio da Fonte'" [value]="simulation.context.source.radius + 'cm'"></app-info-item>
                    }

                    @if(simulation.context.source.type === 'spherical'){
                        <app-info-item [label]="'Raio da Fonte'" [value]="simulation.context.source.radius + 'cm'"></app-info-item>
                    }
                </div>
            </div>

            <div class="content-view">

            </div>

            <div class="footer"></div>
        </div>
    </div>
</div>